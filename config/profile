. "$HOME/.cargo/env"

# Set up a long-running SSH agent session
env=~/.ssh/agent.env

# If the agent is already running and the file exists, use it
if test -f "$env"; then
    . "$env" > /dev/null
fi

# If the agent is not running (or the file was not sourced)
if ! ssh-add -l > /dev/null 2>&1; then
    # Kill any old agents and start a new one
    ssh-agent -k > /dev/null
    ssh-agent > "$env"
    . "$env" > /dev/null

    # Add your key automatically, set path accordingly
    ssh-add /home/user/.ssh/id_github
fi
